/*! For license information please see my_threads.f3ef1f368a0f3e9aa255.js.LICENSE.txt */
!function(){var e={"/rw+":function(e,t,n){"use strict";n("OG14"),n("f3/d");var r=n("q1tI"),a=n("i8i4");function o(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function i(e){o(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function c(e){o(1,arguments);var t=i(e);return!isNaN(t)}var l={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function s(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var u={date:s({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:s({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:s({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},d={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function m(e){return function(t,n){var r,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,i=a.width?String(a.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{var c=e.defaultWidth,l=a.width?String(a.width):e.defaultWidth;r=e.values[l]||e.values[c]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function f(e){return function(t,n){var r=String(t),a=n||{},o=a.width,i=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],c=r.match(i);if(!c)return null;var l,s=c[0],u=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(u)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].test(s))return n}(u):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(s))return n}(u),l=e.valueCallback?e.valueCallback(l):l,{value:l=a.valueCallback?a.valueCallback(l):l,rest:r.slice(s.length)}}}var p,h={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof l[e]?l[e]:1===t?l[e].one:l[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:u,formatRelative:function(e,t,n,r){return d[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:m({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:m({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:m({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:m({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:m({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(p={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},a=n.match(p.matchPattern);if(!a)return null;var o=a[0],i=n.match(p.parsePattern);if(!i)return null;var c=p.valueCallback?p.valueCallback(i[0]):i[0];return{value:c=r.valueCallback?r.valueCallback(c):c,rest:n.slice(o.length)}}),era:f({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:f({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:f({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:f({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:f({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function v(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function y(e,t){o(2,arguments);var n=i(e).getTime(),r=v(t);return new Date(n+r)}function g(e,t){o(2,arguments);var n=v(t);return y(e,-n)}function b(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var _=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return b("yy"===t?r%100:r,t.length)},w=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):b(n+1,2)},E=function(e,t){return b(e.getUTCDate(),t.length)},k=function(e,t){return b(e.getUTCHours()%12||12,t.length)},S=function(e,t){return b(e.getUTCHours(),t.length)},T=function(e,t){return b(e.getUTCMinutes(),t.length)},N=function(e,t){return b(e.getUTCSeconds(),t.length)},C=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return b(Math.floor(r*Math.pow(10,n-3)),t.length)},O=864e5;function x(e){o(1,arguments);var t=1,n=i(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function L(e){o(1,arguments);var t=i(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=x(r),c=new Date(0);c.setUTCFullYear(n,0,4),c.setUTCHours(0,0,0,0);var l=x(c);return t.getTime()>=a.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function I(e){o(1,arguments);var t=L(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=x(n);return r}var M=6048e5;function A(e,t){o(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,c=null==a?0:v(a),l=null==n.weekStartsOn?c:v(n.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=i(e),u=s.getUTCDay(),d=(u<l?7:0)+u-l;return s.setUTCDate(s.getUTCDate()-d),s.setUTCHours(0,0,0,0),s}function D(e,t){o(1,arguments);var n=i(e,t),r=n.getUTCFullYear(),a=t||{},c=a.locale,l=c&&c.options&&c.options.firstWeekContainsDate,s=null==l?1:v(l),u=null==a.firstWeekContainsDate?s:v(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(r+1,0,u),d.setUTCHours(0,0,0,0);var m=A(d,t),f=new Date(0);f.setUTCFullYear(r,0,u),f.setUTCHours(0,0,0,0);var p=A(f,t);return n.getTime()>=m.getTime()?r+1:n.getTime()>=p.getTime()?r:r-1}function P(e,t){o(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.firstWeekContainsDate,i=null==a?1:v(a),c=null==n.firstWeekContainsDate?i:v(n.firstWeekContainsDate),l=D(e,t),s=new Date(0);s.setUTCFullYear(l,0,c),s.setUTCHours(0,0,0,0);var u=A(s,t);return u}var j=6048e5;function F(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),o=r%60;if(0===o)return n+String(a);var i=t||"";return n+String(a)+i+b(o,2)}function q(e,t){return e%60==0?(e>0?"-":"+")+b(Math.abs(e)/60,2):B(e,t)}function B(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+b(Math.floor(a/60),2)+n+b(a%60,2)}var U={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return _(e,t)},Y:function(e,t,n,r){var a=D(e,r),o=a>0?a:1-a;return"YY"===t?b(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):b(o,t.length)},R:function(e,t){return b(L(e),t.length)},u:function(e,t){return b(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return b(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return b(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return w(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return b(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=function(e,t){o(1,arguments);var n=i(e),r=A(n,t).getTime()-P(n,t).getTime();return Math.round(r/j)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):b(a,t.length)},I:function(e,t,n){var r=function(e){o(1,arguments);var t=i(e),n=x(t).getTime()-I(t).getTime();return Math.round(n/M)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):b(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):E(e,t)},D:function(e,t,n){var r=function(e){o(1,arguments);var t=i(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/O)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):b(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return b(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return b(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return b(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return k(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):S(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):b(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):b(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):T(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):N(e,t)},S:function(e,t){return C(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return q(a);case"XXXX":case"XX":return B(a);case"XXXXX":case"XXX":default:return B(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return q(a);case"xxxx":case"xx":return B(a);case"xxxxx":case"xxx":default:return B(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+F(a,":");case"OOOO":default:return"GMT"+B(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+F(a,":");case"zzzz":default:return"GMT"+B(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return b(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return b((r._originalDate||e).getTime(),t.length)}};function R(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function W(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var Y={p:W,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),a=r[1],o=r[2];if(!o)return R(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",R(a,t)).replace("{{time}}",W(o,t))}},H=6e4;function z(e){return e.getTime()%H}function G(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());t.setSeconds(0,0);var r=n>0?(H+z(t))%H:z(t);return n*H+r}var V=["D","DD"],X=["YY","YYYY"];function Q(e){return-1!==V.indexOf(e)}function $(e){return-1!==X.indexOf(e)}function K(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var J=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Z=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ee=/^'([^]*?)'?$/,te=/''/g,ne=/[a-zA-Z]/;function re(e,t,n){o(2,arguments);var r=String(t),a=n||{},l=a.locale||h,s=l.options&&l.options.firstWeekContainsDate,u=null==s?1:v(s),d=null==a.firstWeekContainsDate?u:v(a.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=l.options&&l.options.weekStartsOn,f=null==m?0:v(m),p=null==a.weekStartsOn?f:v(a.weekStartsOn);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!l.localize)throw new RangeError("locale must contain localize property");if(!l.formatLong)throw new RangeError("locale must contain formatLong property");var y=i(e);if(!c(y))throw new RangeError("Invalid time value");var b=G(y),_=g(y,b),w={firstWeekContainsDate:d,weekStartsOn:p,locale:l,_originalDate:y},E=r.match(Z).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Y[t])(e,l.formatLong,w):e})).join("").match(J).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return ae(n);var o=U[r];if(o)return!a.useAdditionalWeekYearTokens&&$(n)&&K(n,t,e),!a.useAdditionalDayOfYearTokens&&Q(n)&&K(n,t,e),o(_,n,l.localize,w);if(r.match(ne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return E}function ae(e){return e.match(ee)[1].replace(te,"'")}var oe,ie=n("vDqi"),ce=n.n(ie),le=function(){function e(t,n){void 0===n&&(n=e.options);var r=this;for(var a in this.container=t,this.options=n||{},this.watchTimeout=null,this.watchInterval=null,this.resizeEvent=null,e.options)e.options.hasOwnProperty(a)&&void 0===this.options[a]&&(this.options[a]=e.options[a]);var o=this.container.dotdotdot;o&&o.destroy(),this.API={},["truncate","restore","destroy","watch","unwatch"].forEach((function(e){r.API[e]=function(){return r[e].call(r)}})),this.container.dotdotdot=this.API,this.originalStyle=this.container.getAttribute("style")||"",this.originalContent=this._getOriginalContent(),this.ellipsis=document.createTextNode(this.options.ellipsis);var i=window.getComputedStyle(this.container);"break-word"!==i["word-wrap"]&&(this.container.style["word-wrap"]="break-word"),"pre"===i["white-space"]?this.container.style["white-space"]="pre-wrap":"nowrap"===i["white-space"]&&(this.container.style["white-space"]="normal"),null===this.options.height&&(this.options.height=this._getMaxHeight()),this.truncate(),this.options.watch&&this.watch()}return e.prototype.restore=function(){var e=this;this.unwatch(),this.container.setAttribute("style",this.originalStyle),this.container.classList.remove("ddd-truncated"),this.container.innerHTML="",this.originalContent.forEach((function(t){e.container.append(t)}))},e.prototype.destroy=function(){this.restore(),this.container.dotdotdot=null},e.prototype.watch=function(){var e=this;this.unwatch();var t={width:null,height:null},n=function(n,r,a){if(e.container.offsetWidth||e.container.offsetHeight||e.container.getClientRects().length){var o={width:n[r],height:n[a]};return t.width==o.width&&t.height==o.height||e.truncate(),o}return t};"window"===this.options.watch?(this.resizeEvent=function(r){e.watchTimeout&&clearTimeout(e.watchTimeout),e.watchTimeout=setTimeout((function(){t=n(window,"innerWidth","innerHeight")}),100)},window.addEventListener("resize",this.resizeEvent)):this.watchInterval=setInterval((function(){t=n(e.container,"clientWidth","clientHeight")}),1e3)},e.prototype.unwatch=function(){this.resizeEvent&&(window.removeEventListener("resize",this.resizeEvent),this.resizeEvent=null),this.watchInterval&&clearInterval(this.watchInterval),this.watchTimeout&&clearTimeout(this.watchTimeout)},e.prototype.truncate=function(){var e=this,t=!1;return this.container.innerHTML="",this.originalContent.forEach((function(t){e.container.append(t.cloneNode(!0))})),this.maxHeight=this._getMaxHeight(),this._fits()||(t=!0,this._truncateToNode(this.container)),this.container.classList[t?"add":"remove"]("ddd-truncated"),this.options.callback.call(this.container,t),t},e.prototype._truncateToNode=function(t){var n=[],r=[];if(e.$.contents(t).forEach((function(e){if(1!=e.nodeType||!e.matches(".ddd-keep")){var t=document.createComment("");e.replaceWith(t),r.push(e),n.push(t)}})),r.length){for(var a=0;a<r.length;a++){n[a].replaceWith(r[a]);var o=this.ellipsis.cloneNode(!0);switch(r[a].nodeType){case 1:r[a].append(o);break;case 3:r[a].after(o)}var i=this._fits();if(o.parentElement.removeChild(o),!i){if("node"==this.options.truncate&&a>1)return void r[a-2].remove();break}}for(var c=a;c<n.length;c++)n[c].remove();var l=r[Math.max(0,Math.min(a,r.length-1))];if(1==l.nodeType){var s=document.createElement(l.nodeName);s.append(this.ellipsis),l.replaceWith(s),this._fits()?s.replaceWith(l):(s.remove(),l=r[Math.max(0,a-1)])}1==l.nodeType?this._truncateToNode(l):this._truncateToWord(l)}},e.prototype._truncateToWord=function(e){for(var t=e.textContent,n=-1!==t.indexOf(" ")?" ":"　",r=t.split(n),a=r.length;a>=0;a--)if(e.textContent=this._addEllipsis(r.slice(0,a).join(n)),this._fits()){"letter"==this.options.truncate&&(e.textContent=r.slice(0,a+1).join(n),this._truncateToLetter(e));break}},e.prototype._truncateToLetter=function(e){for(var t=e.textContent.split(""),n="",r=t.length;r>=0&&(!(n=t.slice(0,r).join("")).length||(e.textContent=this._addEllipsis(n),!this._fits()));r--);},e.prototype._fits=function(){return this.container.scrollHeight<=this.maxHeight+this.options.tolerance},e.prototype._addEllipsis=function(e){for(var t=[" ","　",",",";",".","!","?"];t.indexOf(e.slice(-1))>-1;)e=e.slice(0,-1);return e+this.ellipsis.textContent},e.prototype._getOriginalContent=function(){var t="script, style";this.options.keep&&(t+=", "+this.options.keep),e.$.find(t,this.container).forEach((function(e){e.classList.add("ddd-keep")}));var n="div, section, article, header, footer, p, h1, h2, h3, h4, h5, h6, table, td, td, dt, dd, li";[this.container].concat(e.$.find("*",this.container)).forEach((function(t){t.normalize(),e.$.contents(t).forEach((function(e){8==e.nodeType&&t.removeChild(e)})),e.$.contents(t).forEach((function(e){if(3==e.nodeType&&""==e.textContent.trim()){var r=e.previousSibling,a=e.nextSibling;(e.parentElement.matches("table, thead, tbody, tfoot, tr, dl, ul, ol, video")||!r||1==r.nodeType&&r.matches(n)||!a||1==a.nodeType&&a.matches(n))&&t.removeChild(e)}}))}));var r=[];return e.$.contents(this.container).forEach((function(e){r.push(e.cloneNode(!0))})),r},e.prototype._getMaxHeight=function(){if("number"==typeof this.options.height)return this.options.height;for(var e=window.getComputedStyle(this.container),t=["maxHeight","height"],n=0,r=0;r<t.length;r++)if("px"==(a=e[t[r]]).slice(-2)){n=parseFloat(a);break}if("border-box"==e.boxSizing)for(t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],r=0;r<t.length;r++){var a;"px"==(a=e[t[r]]).slice(-2)&&(n-=parseFloat(a))}return Math.max(n,0)},e.version="4.1.0",e.options={ellipsis:"… ",callback:function(e){},truncate:"word",tolerance:0,keep:null,watch:"window",height:null},e.$={find:function(e,t){return t=t||document,Array.prototype.slice.call(t.querySelectorAll(e))},contents:function(e){return e=e||document,Array.prototype.slice.call(e.childNodes)}},e}(),se=le;void 0!==(oe=window.Zepto||window.jQuery)&&(oe.fn.dotdotdot=function(e){return this.each((function(t,n){var r=new le(n,e);n.dotdotdot=r.API}))}),n("KKXr");var ue=function(e){return function(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}(window._sr,e)};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n("rE2o"),n("ioFf"),n("rGqo"),n("yt8O"),n("hhXQ"),n("VRzm"),n("Btvt");var me=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,r){return!t&&void 0!==e||t&&Object.values(e).every((function(e){return"object"==de(e)}))?n(e):r(new Error("The requested data is not available"))}))},fe=function(e){return me(ue(e))},pe=function(){var e={affiliate:ue("affiliate"),miscellaneous:ue("commerce.miscellaneous"),customer:ue("customer"),session:ue("session"),site:ue("site"),features:ue("config.features"),page:ue("page")};return me(e,!0)},he=function(){return fe("page")},ve=(n("IoHR"),n("q+cD"),n("FYjs"),n("rtAd"),n("Avyg"),n("a96D"),n("afw4"),n("XfO3"),n("HEwt"),n("a1Th"),n("/YH0"),n("KoUA"),n("/kEZ")),ye=n.n(ve);function ge(e,t){(0,r.useEffect)((function(){function n(n){n.key===e&&t()}return window.addEventListener("keyup",n),function(){return window.removeEventListener("keyup",n)}}),[t,e])}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n("cDjE");var we=function(e){var t=e.children,n=e.close,o=e.id,i=e.wrapperClass,c=e.modalLabelText,l=e.showDialog,s=e.initialFocus,u=e.fullBleed,d=be((0,r.useState)(!1),2),m=d[0],f=d[1],p=be((0,r.useState)(!1),2),h=p[0],v=p[1],y=be((0,r.useState)({}),2),g=y[0],b=y[1];function _(){return f(!1),v(!0)}function w(e){return e in g?g[e]:""}return ge("Escape",(function(){_()})),(0,r.useEffect)((function(){fe("localisations.modal").then((function(e){b(e)})).catch((function(e){console.log("Error accessing localisations")}))}),[]),(0,r.useEffect)((function(){l&&f(!0)}),[l]),(0,r.useEffect)((function(){m&&document.body.classList.add("prevent-scroll")}),[m]),(0,r.useEffect)((function(){var e=setTimeout((function(){h&&(document.body.classList.remove("prevent-scroll"),v(!1),n())}),300);return function(){return clearTimeout(e)}}),[h,n]),l?(0,a.createPortal)(r.createElement(r.Fragment,null,r.createElement("div",{className:"modal-overlay ".concat(m?"modal-overlay--open":""),onClick:_}),r.createElement(ye(),{active:l,focusTrapOptions:{allowOutsideClick:!0,initialFocus:s||""}},r.createElement("div",{className:"modal ".concat(m?"modal--open":""," ").concat(i||""),id:"".concat(o,"-dialog"),"aria-modal":"true",role:"dialog","aria-labelledby":"".concat(o,"-dialog-label")},r.createElement("div",{className:"modal__header"},c?r.createElement("h2",{id:"".concat(o,"-dialog-label"),role:"status","aria-live":"assertive"},c," ",r.createElement("span",{className:"sr-only"},w("dialog_window"))):null),r.createElement("button",{type:"button",className:"modal__close","data-dismiss":"modal","aria-label":w("close"),onClick:_},r.createElement("i",{className:"far fa-times","aria-hidden":"true"}),r.createElement("span",null,w("close"))),r.createElement("div",{className:"modal__content ".concat(u?"modal__content--full-bleed":"")},t)))),document.body):null},Ee=(n("jm62"),n("RW0V"),n("Z2Ku"),n("L9s1"),n("pIFo"),n("9XZr"),n("17x9")),ke=n.n(Ee),Se=function(e){var t,n=e.confirmedDate,a=e.handleSelect;return r.createElement("div",{className:"arrange-viewing__date-button ".concat(n?"arrange-viewing__date-button--confirmed":"")},n?r.createElement("span",{className:"arrange-viewing__confirmed-date"},(t=n.split("-"),"".concat(t[2],"/").concat(t[1],"/").concat(t[0]))):null,r.createElement("button",{className:"button button--secondary",onClick:a,type:"button"},r.createElement("div",{className:"button__content"},r.createElement("span",{className:"button__icon"},r.createElement("i",{className:"far fa-calendar-alt","aria-hidden":!0})),r.createElement("span",{className:"button__text"},"Select date"))))},Te=function(e){var t=e.updateSelectedTime,n=e.startTime,a=e.defaultEndTime;return r.createElement(r.Fragment,null,r.createElement("label",{className:"form-group__title",htmlFor:"viewingStart"},"Viewing start time"),r.createElement("div",{className:"form-group__select"},r.createElement("input",{type:"time",onChange:t,name:"start_time",id:"viewingStart",value:n,className:"form-group__select-list"})),r.createElement("span",{className:"form-group__text"},"to"),r.createElement("label",{className:"form-group__title",htmlFor:"viewingEnd"},"Viewing end time"),r.createElement("div",{className:"form-group__select"},r.createElement("input",{type:"time",onChange:t,name:"end_time",value:a,id:"viewingEnd",className:"form-group__select-list"})))};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le=function(e){e.changeView;var t=e.viewing,n=e.cancelViewing,a=e.userName,o=e.errorOnCancel,i=e.user,c=e.messageThread,l=e.close,s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)({reason:c||"offerer"===i?"Sorry, I have had to cancel the viewing because the room/property is no longer available.":"Sorry, I have cancelled the viewing because I have found a room/property.",message:""}),2),u=s[0],d=s[1];function m(e){d(Ce(Ce({},u),{},Oe({},e.target.name,e.target.value)))}return r.createElement("span",{className:"arrange-viewng__cancel-form"},"confirmed"===t.seeker.status&&"confirmed"===t.offerer.status?r.createElement("p",{className:"arrange-viewing__warning"},r.createElement("span",{className:"arrange-viewing__warning-icon"},r.createElement("i",{className:"far fa-exclamation-triangle","aria-hidden":!0})),"This viewing has been confirmed by both parties, are you sure you wish to cancel?"):null,r.createElement("form",{className:"form"},r.createElement("fieldset",{className:"form__fieldset"},r.createElement("legend",{className:"form__legend"},"Reason for cancellation"),r.createElement("div",{className:"form-group"},r.createElement("span",{className:"form-group__radio"},r.createElement("input",{id:"taken",type:"radio",name:"reason",value:c||"offerer"===i?"Sorry, I have had to cancel the viewing because the room/property is no longer available.":"Sorry, I have cancelled the viewing because I have found a room/property.",onChange:function(e){return m(e)},defaultChecked:"true"}),r.createElement("label",{htmlFor:"taken"},c||"offerer"===i?"Room/Property not available":"I've found a room/property")),r.createElement("span",{className:"form-group__radio"},r.createElement("input",{id:"somethingComeUp",type:"radio",name:"reason",value:c?"".concat(a.trim()," has cancelled this viewing."):"seeker"===i?"Sorry, I have had to cancel the viewing as I can't make this time.":"Sorry, I have had to cancel the viewing as something has come up.",onChange:function(e){return m(e)}}),r.createElement("label",{htmlFor:"somethingComeUp"},c?"Viewer asked to cancel":"seeker"===i?"I can't make this time":"Something has come up")),r.createElement("span",{className:"form-group__radio"},r.createElement("input",{id:"askedToCancel",type:"radio",name:"reason",value:c||"seeker"===i?"Sorry, I have had to cancel this viewing.":"".concat(a.trim()," has asked to cancel the viewing."),onChange:function(e){return m(e)}}),r.createElement("label",{htmlFor:"askedToCancel"},c||"seeker"===i?"Other reason":"".concat(a.trim()," asked to cancel")))),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"form-group__label",htmlFor:"cancelReason"},r.createElement("span",{className:"form-group__label-bold"},"Message")," (optional)"),r.createElement("textarea",{"aria-describedby":"messageReason",id:"cancelReason",className:"form-group__textarea",rows:"4",onChange:function(e){return m(e)},name:"message",value:u.message}),r.createElement("p",{className:"form-group__textarea-description",id:"messageReason"},"Add a message to explain why"))),o?r.createElement("p",{className:"arrange-viewing__form-error"},o):null,r.createElement("div",{className:"arrange-viewing__button-wrapper"},r.createElement("button",{type:"button",className:"button button--secondary",onClick:function(){return l()}},"Exit without changes"),r.createElement("button",{type:"button",onClick:function(){return n(u)},className:"button"},"Confirm"))))};function Ie(e,t){o(2,arguments);var n=i(e),r=v(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var a=n.getDate(),c=new Date(n.getTime());c.setMonth(n.getMonth()+r+1,0);var l=c.getDate();return a>=l?c:(n.setFullYear(c.getFullYear(),c.getMonth(),a),n)}function Me(e,t){o(2,arguments);var n=v(t);return Ie(e,-n)}function Ae(e){o(1,arguments);var t=i(e);return t.setDate(1),t.setHours(0,0,0,0),t}function De(e,t){o(2,arguments);var n=i(e),r=v(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function Pe(e,t){o(2,arguments);var n=v(t),r=7*n;return De(e,r)}function je(e,t){o(2,arguments);var n=v(t);return Ie(e,12*n)}function Fe(e){o(1,arguments);var t=i(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function qe(e){o(1,arguments);var t=i(e);return t.setHours(0,0,0,0),t}function Be(e,t){o(2,arguments);var n=qe(e),r=qe(t);return n.getTime()===r.getTime()}function Ue(e){o(1,arguments);var t=i(e),n=t.getFullYear(),r=t.getMonth(),a=new Date(0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function Re(e){o(1,arguments);var t=i(e),n=t.getDay();return n}function We(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||He(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||He(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n("l4R/");var Ge=function(e){var t=e.confirmedDate,n=e.handleSelectDate,a=e.closeCalendar,c=Ye((0,r.useState)(t),2),l=c[0],s=c[1],u=Ye((0,r.useState)(t?new Date(t):new Date),2),d=u[0],m=u[1],f=Ye((0,r.useState)(t?new Date(t):new Date),2),p=f[0],h=f[1];function y(e){var t="";return t=g(e)?" calendar__cell--current":" calendar__cell--empty",re(d,"yyyy-MM-dd")===re(e,"yyyy-MM-dd")&&l&&(t=" calendar__cell--current calendar__cell--active"),"calendar__cell".concat(t)}function g(e){return function(e,t){o(2,arguments);var n=i(e),r=i(t);return n.getTime()>r.getTime()}(e,new Date)||function(e){return o(1,arguments),Be(e,Date.now())}(e)}var b=function(e,t){if(g(e)){s(!0),m(e),t&&h(e);var r=re(e,"yyyy-MM-dd");n(r)}};return r.createElement("div",{className:"calendar"},r.createElement("div",{className:"calendar__navigation"},r.createElement("button",{className:"calendar__nav-button",onClick:function(){var e=Me(p,1);h(Ae(e))},"aria-label":"Previous month"},r.createElement("span",{className:"calendar__icon"},r.createElement("i",{className:"fa fa-chevron-circle-left","aria-hidden":!0}))),r.createElement("h3",{className:"calendar__heading"},re(p,"MMMM yyyy")),r.createElement("button",{className:"calendar__nav-button",onClick:function(){var e=Ie(p,1);h(Ae(e))},"aria-label":"Next month"},r.createElement("span",{className:"calendar__icon"},r.createElement("i",{className:"fa fa-chevron-circle-right","aria-hidden":!0})))),r.createElement("table",{id:"grid",tabIndex:"0",onKeyDown:function(e){s(!0);var t,n,r,i,c=e.keyCode,l=e.shiftKey;switch(c){case 27:return a();case 33:return l?void b(function(e,t){return o(2,arguments),je(e,-v(t))}(d,1),!0):void b(Me(d,1),!0);case 34:return l?void b(je(d,1),!0):void b(Ie(d,1),!0);case 35:return void b(Fe(d),!0);case 36:return void b(Ae(d),!0);case 37:return i=function(e,t){return o(2,arguments),De(e,-v(t))}(d,1),void b(i,!0);case 38:return r=function(e,t){return o(2,arguments),Pe(e,-v(t))}(d,1),void b(r,!0);case 39:return n=De(d,1),void b(n,!0);case 40:return t=Pe(d,1),void b(t,!0);default:return!1}},role:"grid",className:"calendar__table"},r.createElement("thead",null,r.createElement("tr",{role:"row",className:"calendar__table-row"},r.createElement("th",{className:"calendar__header",role:"columnheader","aria-label":"Sunday"},"S"),r.createElement("th",{className:"calendar__header",role:"columnheader","aria-label":"Monday"},"M"),r.createElement("th",{className:"calendar__header",role:"columnheader","aria-label":"Tuesday"},"T"),r.createElement("th",{className:"calendar__header",role:"columnheader","aria-label":"Wednesday"},"W"),r.createElement("th",{className:"calendar__header",role:"columnheader","aria-label":"Thursday"},"T"),r.createElement("th",{className:"calendar__header",role:"columnheader","aria-label":"Friday"},"F"),r.createElement("th",{className:"calendar__header",role:"columnheader","aria-label":"Saturday"},"S"))),r.createElement("tbody",null,function(){for(var e=Ue(p),t=Ue(Me(p,1)),n=Re(Ae(p)),r=Re(Fe(p)),a=[],c=[].concat(We(Array.from({length:n},(function(e,r){return t-(n-1-r)}))),We(Array.from({length:e},(function(e,t){return function(e,t){o(2,arguments);var n=i(e),r=v(t);return n.setDate(r),n}(p,t+1)}))),We(Array.from({length:6-r},(function(e,t){return t+1})))),l=0;l<c.length;l+=7)a.push(c.slice(l,l+7));return a}().map((function(e,t){return r.createElement("tr",{className:"week",key:"week-".concat(t),role:"row"},e.map((function(e,t){return e&&"number"!=typeof e?r.createElement("td",{className:y(e),key:"day-cell-".concat(t),onClick:function(){return b(e)},role:"gridcell","aria-selected":re(d,"yyyy-MM-dd")===re(e,"yyyy-MM-dd")},r.createElement("span",{className:"calendar__cell-data"},function(e){return o(1,arguments),i(e).getDate()}(e))):r.createElement("td",{className:"calendar__cell calendar__cell--empty",key:"day-cell-".concat(t)},e)})))})))))};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je=function(e){var t=e.changeView,n=e.close,a=e.step,o=e.viewing,i=e.seekerId,c=e.advertId,l=e.userId,s=e.userName,u=e.messageThread,d=$e((0,r.useState)(o?o.start_time.split("T")[0]:""),2),m=d[0],f=d[1],p=$e((0,r.useState)(o?o.start_time.split("T")[0]:""),2),h=p[0],v=p[1],y=$e((0,r.useState)({start_time:o?o.start_time.slice(11,16):"13:00",end_time:o?o.end_time.slice(11,16):"13:45"}),2),g=y[0],b=y[1],_=$e((0,r.useState)(""),2),w=_[0],E=_[1],k=$e((0,r.useState)(""),2),S=k[0],T=k[1];function N(e,t){return new Date(e[0],e[1]-1,e[2],t[0],t[1],0)}function C(e){var t=window.location.search.replace(/&?msg=[^&]+/,"");if(window.location.pathname.includes("mythreads_beta")){var n="".concat(window.location.pathname+t,"&msg=").concat(e,"#most_recent_incoming_message");n=="".concat(window.location.pathname+window.location.search,"#most_recent_incoming_message")?window.location.reload():window.location.href=n}else window.location.href="".concat(window.location.pathname+t,"?msg=").concat(e)}return r.createElement(r.Fragment,null,"arrangeViewing"===a?r.createElement(r.Fragment,null,o&&"confirmed"===o.seeker.status?r.createElement("p",{className:"arrange-viewing__warning"},r.createElement("span",{className:"arrange-viewing__warning-icon"},r.createElement("i",{className:"far fa-exclamation-triangle","aria-hidden":!0})),"This viewing has been confirmed by the other party. Make sure to discuss an alternative time with them before editing."):r.createElement("p",{className:"arrange-viewing__sub-heading"},"Once you've discussed a suitable time, confirm here to add to your viewing calendars."),r.createElement("div",{className:"arrange-viewing__viewing-form ".concat(o?"":"arrange-viewing__viewing-form--new")},r.createElement("form",{className:"form"},w?r.createElement("p",{className:"arrange-viewing__form-error"},w):null,r.createElement("div",{className:"form-group form-group--date"},r.createElement("h2",{className:"heading heading--sub"},"Date"),r.createElement(Se,{confirmedDate:h,handleSelect:function(){return t("calendar")}})),r.createElement("div",{className:"form-group form-group--time"},r.createElement("h2",{className:"heading heading--sub"},"Time"),r.createElement(Te,{updateSelectedTime:function(e){var t=e.target,n=t.name,r=t.value;if(E(""),"start_time"===n&&!g.end_time){var a=r.split(":"),o=parseInt(a[1],10)+45;if(o<=55)return b({start_time:r,end_time:"".concat(a[0],":").concat(o)});var i="23"===a[0]?"00":"".concat(parseInt(a[0],10)+1).padStart(2,"0");return o=(o-60).toString().padStart(2,"0"),b({start_time:r,end_time:"".concat(i,":").concat(o)})}return b(Xe(Xe({},g),{},Qe({},n,"".concat(r))))},defaultEndTime:g.end_time,startTime:g.start_time})),r.createElement("div",{className:"arrange-viewing__button-wrapper"},o?r.createElement("button",{onClick:function(){return n()},className:"button button--secondary",type:"button"},"Exit without changes"):null,r.createElement("button",{type:"button",className:"button",onClick:o?function(){var e=N(h.split("-"),g.start_time.split(":")),t={end_time:N(h.split("-"),g.end_time.split(":")).toISOString(),start_time:e.toISOString()};ce().patch("/api/1.0/viewings/".concat(o.id),t).then((function(e){n(),C("viewing-edited")})).catch((function(e){return 6810===e.response.data.errors[0].code?E("Please check the date, start or end times are correct"):E(e.response.data.errors[0].message)}))}:function(){var e=N(h.split("-"),g.start_time.split(":")),t={end_time:N(h.split("-"),g.end_time.split(":")).toISOString(),message_thread:{advert:{id:c}},offerer:{advert:{id:c},user:{id:l},status:"confirmed"},seeker:{user:{id:i},status:"unconfirmed",attended:"unconfirmed"},start_time:e.toISOString()};ce().post("/api/1.0/viewings",t).then((function(e){"Created"===e.statusText&&n(),C("viewing-created")})).catch((function(e){return 6810===e.response.data.errors[0].code?E("Please check the date, start or end times are correct"):6807===e.response.data.errors[0].code?E("You already have an active viewing with this user"):E(e.response.data.errors[0].message)}))},disabled:!((!o||h!==o.start_time.split("T")[0]||g.start_time!==o.start_time.slice(11,16)||g.end_time!==o.end_time.slice(11,16))&&h&&g.start_time&&g.end_time&&!w)},"Confirm"," ",r.createElement("span",{className:"arrange-viewing__button-extended"},"viewing")),o?r.createElement("button",{onClick:function(){return t("cancelViewing")},className:"button button--link",type:"button"},"Cancel viewing"):null))),r.createElement("p",{className:"arrange-viewing__app-note"},r.createElement("span",{className:"arrange-viewing__app-note-header"},"Note:")," you can't add or edit viewings on the SpareRoom apps yet")):null,"calendar"===a?r.createElement(r.Fragment,null,r.createElement("div",{className:"arrange-viewing__calendar"},r.createElement(Ge,{confirmedDate:h,handleSelectDate:function(e){f(e)}}),r.createElement("div",{className:"arrange-viewing__button-wrapper"},r.createElement("button",{type:"button",onClick:function(){return t("arrangeViewing")},className:"button button--secondary"},"Back"),r.createElement("button",{type:"button",onClick:function(){E(""),v(m),t("arrangeViewing")},className:"button"},"Confirm date")))):null,"cancelViewing"===a?r.createElement(Le,{cancelViewing:function(e){var t={message:"".concat(e.reason," ").concat(e.message),offerer:{advert:{id:c},user:{id:l},status:i!==l?"cancelled":o.offerer.status},seeker:{user:{id:i},status:i===l?"cancelled":o.seeker.status}};ce().patch("/api/1.0/viewings/".concat(o.id),t).then((function(e){n(),C("viewing-cancelled")})).catch((function(e){return T(e.response.data.errors[0].message)}))},changeView:t,viewing:o,userName:s,errorOnCancel:S,messageThread:u,user:l===o.seeker.user.id?"seeker":"offerer",close:n}):null)};Je.propTypes={step:ke().string,seekerId:ke().string,advertId:ke().string,userId:ke().string,changeView:ke().func};var Ze=Je,et=function(){return r.createElement("div",{className:"arrange-viewing__post-advert"},r.createElement("p",{className:"arrange-viewing__warning"},r.createElement("span",{className:"arrange-viewing__warning-icon"},r.createElement("i",{className:"far fa-exclamation-triangle","aria-hidden":!0})),"You need to have an active ad on SpareRoom in order to arrange a viewing."),r.createElement("div",{className:"arrange-viewing__button-wrapper"},r.createElement("a",{href:"/content/placeditadvert/choose-section-new/",className:"button"},"Post an advert")))},tt=function(e){var t=e.showDialog,n=e.close,a=e.step,o=e.viewing,i=e.userId,c=e.advertId,l=e.seekerId,s=e.userName,u=e.changeView,d=e.modalTitle,m=e.offererAdCount;return r.createElement(r.Fragment,null,r.createElement(we,{close:n,showDialog:t,modalLabelText:d,id:"success-guarantee",initialFocus:".modal__close"},"0"===m?r.createElement(et,null):r.createElement(Ze,{step:a,close:n,viewing:o,userId:i,userName:s,advertId:c,seekerId:l,changeView:u})))};function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var at=function(e){var t,n,a,o=e.viewing,i=e.advertId,c=e.userId,l=e.seekerId,s=e.userName,u=e.offererAdCount,d=nt((0,r.useState)(!1),2),m=d[0],f=d[1],p=nt((0,r.useState)("arrangeViewing"),2),h=p[0],v=p[1],y=nt((0,r.useState)(o?"Edit viewing":"Arrange viewing"),2),g=y[0],b=y[1];function _(e){switch(e){case"arrangeViewing":b(o?"Edit viewing":"Arrange viewing");break;case"calendar":b("Select a date");break;case"cancelViewing":b("Cancel viewing");break;default:b(o?"Edit viewing":"Arrange viewing")}}function w(e){_(e),v(e),f(!0)}return r.createElement(r.Fragment,null,r.createElement("strong",null,"Viewing:"),o?null:r.createElement(r.Fragment,null,r.createElement("span",{className:"arrange-viewing__agreed-time"},"Agreed a time to view?"),r.createElement("span",{className:"arrange-viewing__add-to-cal button button--link",onClick:function(){return w("arrangeViewing")}},"Add to your viewing calendars.")),o?r.createElement(r.Fragment,null,"confirmed"===o.seeker.status?r.createElement("span",{className:"arrange-viewing__status arrange-viewing__status--confirmed"},r.createElement("i",{className:"far fa-check-circle"})," confirmed"):r.createElement("span",{className:"arrange-viewing__status arrange-viewing__status--pending"},r.createElement("i",{className:"far fa-exclamation-triangle"})," pending"),(n=re(t=Date.parse("".concat(o.start_time)),"mm"),a=re(t,"00"===n?"do MMM haaa":"do MMM\th.mmaaa"),"".concat(a," "))," -"," ",r.createElement("button",{className:"button button--link",onClick:function(){return w("arrangeViewing")},type:"button"},"Edit")):null,r.createElement(tt,{showDialog:m,close:function(){f(!1),document.body.classList.remove("prevent-scroll")},step:h,viewing:o,userId:c,advertId:i,seekerId:l,userName:s,changeView:function(e){_(e),v(e)},modalTitle:g,offererAdCount:u}))},ot=void n("ls82");function it(e){var t=e.category,n=e.action,r=e.label,a=e.value,o=e.non_interaction,i=void 0!==o&&o;if(window.dataLayer&&window.dataLayer.push){var c={event:"ga.event",ga_event_category:t,ga_event_action:n,ga_event_label:r,ga_event_value:a,ga_event_non_interaction:i};return window.dataLayer.push(c)}return!1}function ct(e){return it({category:"messaging",action:e.action,label:window.location.href})}function lt(){return ct({action:"sort_newest"})}function st(){return ct({action:"sort_oldest"})}function ut(){return ct({action:"sort_name"})}function dt(){return ct({action:"filters_reset|reset_filters"})}function mt(){return ct({action:"labels_remove"})}function ft(){return ct({action:"notes_open"})}function pt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ht(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){pt(o,r,a,i,c,"next",e)}function c(e){pt(o,r,a,i,c,"throw",e)}i(void 0)}))}}var vt,yt=document.querySelector("#edit-thread-note"),gt=yt.querySelector("textarea"),bt=document.querySelector("#overlay-mask"),_t=yt.querySelector(".conversation-note__close"),wt=yt.querySelector(".status.unsaved"),Et=yt.querySelector(".status.save_error"),kt=yt.querySelector(".status.saved");function St(e){e.style.display="none"}function Tt(){[wt,Et,kt].forEach((function(e){return St(e)}))}function Nt(e,t){if(""==t||null==t){var n=document.getElementById("threadNotes".concat(e));n&&St(n)}}function Ct(e){e.style.display="block"}function Ot(e){var t=e.dataset,n=t.noteThreadId,r=t.noteText,a=void 0===r,o=e.querySelector(".button__text");gt.value=a?o.textContent:r;var i,c,l,s=(i=function(){var t=gt.value.trim();ce().post("/".concat(vt,"/mythreads_beta.pl"),null,{params:{action:"save_note",format:"json",thread_id:n,conversation_note:t},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){if(n.data.success)return a?o.textContent=t:e.dataset.noteText=t,Tt(),Ct(kt);throw new Error("Not updated")})).catch((function(e){return console.log(e.message),Tt(),Ct(Et)}))},c=1e3,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.bind.apply(i,[ot].concat(t));clearTimeout(l),l=setTimeout(r,c)});gt.addEventListener("input",s),gt.addEventListener("input",(function(){Tt(),Ct(wt)})),bt.addEventListener("click",(function(){Tt(),Nt(n,gt.value.trim()),gt.removeEventListener("input",s)})),_t.addEventListener("click",(function(){Tt(),Nt(n,gt.value.trim()),gt.removeEventListener("input",s),ct({action:"notes_close|x"})})),document.addEventListener("keydown",(function(e){27===e.keyCode&&Nt(n,gt.value.trim())}))}function xt(){return(xt=ht(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("site.sub_dir");case 2:vt=e.sent,document.querySelectorAll("[data-note-thread-id]").forEach((function(e){e.addEventListener("click",(function(){Ot(e),ft()}))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lt=document.getElementById("bulkReplyButton"),It=document.getElementById("delete_selected");function Mt(){document.getElementById("overlay-mask").classList.remove("overlay-mask--active"),document.querySelector(".delete-unread-warning").classList.remove("overlay-target--active")}var At=(n("dRSK"),window._sr.messaging.label_colours);function Dt(e){return At.find((function(t){return t.rgb===e})).hex}function Pt(){return At[Math.floor(Math.random()*Math.floor(At.length))].rgb}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qt=function(e){var t=jt((0,r.useState)(!0),2),n=t[0],a=t[1],o=jt((0,r.useState)(!1),2),i=o[0],c=o[1],l=jt((0,r.useState)(""),2),s=l[0],u=l[1],d=jt((0,r.useState)(null),2),m=d[0],f=d[1],p=jt((0,r.useState)(null),2),h=p[0],v=p[1];return r.createElement("div",{id:"createLabelDiv",className:"add-label-component__label-row add-label-component__label-row--add-label"},n?r.createElement("button",{onClick:function(){f(Pt),a(!1),c(!0)},className:"button button--link add-label-component__create-label-link"},r.createElement("span",{className:"far fa-plus add-label-component__create-label-link-icon"}),e.localisations.labels.create_new_label):null,i?r.createElement("div",{className:"add-label-component__create-label"},r.createElement("span",{style:{color:m},className:"fas fa-tag add-label-component__create-label-icon"}),r.createElement("label",{htmlFor:"labelName",hidden:!0},e.localisations.labels.label_name),r.createElement("input",{type:"text",id:"labelName",className:"add-label-component__label-name-add",value:s,onChange:function(e){return u(e.target.value)},maxLength:"64"}),r.createElement("button",{onClick:function(){v(null);var t=Dt(m);""!=s?ce().post("/api/1.0/labels",{color:t,name:s,user:{uuid:e.uuid}}).then((function(t){v(null),e.updateLabels?(e.updateLabels(),a(!0),c(!1)):window.location.reload()})).catch((function(){v(e.localisations.labels.error_creating)})):v(e.localisations.labels.enter_label_name)},className:"button add-label-component__button"},e.localisations.labels.create)):null,h?r.createElement("div",{className:"add-label-component__error"},r.createElement("span",{className:"error"},h)):null)},Bt=function(e){var t=(0,r.useRef)();(0,r.useEffect)((function(){return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}));var n=function(n){t.current.contains(n.target)||e.closeColorPicker(e.index)};return r.createElement("div",{className:"add-label-component__color-picker-wrapper",ref:t},e.labelColors&&e.labelColors.map((function(t,n){return r.createElement("button",{key:n,"aria-label":"Change colour to ".concat(t.description),onClick:function(){return e.changeColor(e.label,t.rgb)},className:"add-label-component__color-picker-color ".concat(e.label.color===t.hex?"add-label-component__color-picker-color--current":""),style:{backgroundColor:t.rgb}}," ")})))};function Ut(e){return function(e){if(Array.isArray(e))return Yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||Wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){if(e){if("string"==typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yt(e,t):void 0}}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ht=function(e){var t=At,n=Rt((0,r.useState)(!1),2),a=n[0],o=n[1],i=Rt((0,r.useState)(null),2),c=i[0],l=i[1],s=Rt((0,r.useState)(null),2),u=s[0],d=s[1];function m(){a&&window.location.reload(),window.closeManageLabels&&window.closeManageLabels()}function f(t,n){l(null);var r=Dt(n);ce().patch("/api/1.0/labels/".concat(t.id),{color:r,name:t.name}).then((function(){p()})).catch((function(){l(e.localisations.labels.error_updating)}))}function p(){o(!0),ce().get("/api/1.0/users/".concat(e.uuid,"/labels")).then((function(e){d(e.data.data)})).catch((function(){l(e.localisations.labels.error_updating_list)}))}function h(e){var t=Ut(u);t[e].colorPickerOpen=!1,d(t)}return ge("Escape",(function(){m()})),(0,r.useEffect)((function(){ce().get("/api/1.0/users/".concat(e.uuid,"/labels")).then((function(e){d(e.data.data)})).catch((function(){l(e.localisations.labels.error_api)}))}),[e.uuid]),(0,r.useEffect)((function(){var e=document.querySelector(".manage-labels__close"),t=document.querySelector(".overlay-mask");return t&&t.addEventListener("click",(function(){m()})),e&&e.addEventListener("click",(function(){m(),ct({action:"labels_manage_close|done"})})),function(){t&&t.removeEventListener("click",m),e&&e.removeEventListener("click",m)}})),r.createElement(r.Fragment,null,r.createElement("h3",{className:"manage-labels__heading heading"},e.localisations.labels.manage_labels),r.createElement("hr",{className:"manage-labels__hr"}),u&&u.map((function(n,a){return r.createElement("div",{className:"manage-labels__label-row",key:a},r.createElement("div",{className:"manage-labels__name-wrapper"},r.createElement("span",{className:"fas fa-tag manage-labels__label-icon","aria-hidden":"true",style:{color:n.color}}),r.createElement("label",{htmlFor:"labelName".concat(a),className:"manage-labels__label-name-label"},e.localisations.labels.label_name),r.createElement("input",{type:"text",id:"labelName".concat(a),className:"manage-labels__label-name",disabled:!n.isEditable,value:n.name,maxLength:"64",onChange:function(e){return function(e,t){var n=Ut(u);n[t].name=e,d(n)}(e.target.value,a)}})),n.isEditable?r.createElement("button",{onClick:function(){return function(t){l(null),ce().patch("/api/1.0/labels/".concat(t.id),{color:t.color,name:t.name}).then((function(){p()})).catch((function(){l(e.localisations.labels.error_editing)}))}(n)},className:"button manage-labels__edit-save-button"},e.localisations.labels.save):r.createElement("div",{className:"manage-labels__actions"},r.createElement("button",{onClick:function(){return function(e){var t=Ut(u);t[e].colorPickerOpen=!0,d(t)}(a)},className:"button button--link manage-labels__actions-colour ".concat(n.colorPickerOpen?"manage-labels__actions-colour--open":""),"aria-label":"".concat(e.localisations.labels.edit_colour_of," ").concat(n.name," ").concat(e.localisations.labels.label),style:{backgroundColor:n.color}}),n.colorPickerOpen?r.createElement(Bt,{labelColors:t,index:a,closeColorPicker:h,label:n,changeColor:f}):null,r.createElement("button",{onClick:function(){return function(e){var t=Ut(u);t[e].isEditable=!0,d(t)}(a)},"aria-label":"".concat(e.localisations.labels.edit_name_of," ").concat(n.name," ").concat(e.localisations.labels.label),className:"button button--link manage-labels__actions-edit"},r.createElement("i",{className:"far fa-pen","aria-hidden":"true"})),r.createElement("button",{onClick:function(){return t=n.id,l(null),void ce().delete("/api/1.0/labels/".concat(t)).then((function(){p()})).catch((function(){l(e.localisations.labels.error_deleting)}));var t},"aria-label":"".concat(e.localisations.labels.delete," ").concat(n.name," ").concat(e.localisations.labels.label),className:"button button--link manage-labels__actions-delete"},r.createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}))))})),r.createElement(qt,{uuid:e.uuid,updateLabels:p,localisations:e.localisations}),c?r.createElement("div",{className:"manage-labels__error"},r.createElement("span",{className:"error"},c)):null)};function zt(e){return"success"==e?"far fa-check-circle":"error"==e?"far fa-exclamation-circle":"warning"==e?"far fa-exclamation-triangle":"info"==e?"far fa-info-circle":"tips"==e?"far fa-lightbulb-on":""}function Gt(e){return"small"==e?" message-box--small":""}var Vt=function(e){var t=e.type,n=e.size,a=e.children;return r.createElement("div",{className:"message-box message-box--".concat(t).concat(Gt(n))},r.createElement("span",{className:"message-box__icon"},r.createElement("i",{className:zt(t)})),a)},Xt=function(e){var t=e.type,n=e.size,a=e.children;return r.createElement(Vt,{type:t,size:n},r.createElement("div",{className:"message-box__content"},a))};function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n("LPdc");var Kt=function(e){var t=e.children,n=e.close,a=e.ariaLive,o=Qt((0,r.useState)(!1),2),i=o[0],c=o[1],l=Qt((0,r.useState)(!1),2),s=l[0],u=l[1];function d(){return u(!0)}return(0,r.useEffect)((function(){var e=setTimeout((function(){return c(!0)}),1),t=setTimeout((function(){return d()}),4e3);return document.addEventListener("click",d),function(){document.removeEventListener("click",d),clearTimeout(e),clearTimeout(t)}}),[]),(0,r.useEffect)((function(){c(!1);var e=setTimeout((function(){return s?n():null}),300);return function(){return clearTimeout(e)}}),[s,n]),r.createElement("div",{"aria-live":a,className:"floating-message-box".concat(i?" floating-message-box--open":"")},r.createElement("div",{className:"floating-message-box__message-box"},r.createElement(Xt,{type:"success"},t)))};function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zt=function(e){var t=e.children,n=e.onClose,a=e.ariaLive,o=void 0===a?"polite":a,i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(!0),2),c=i[0],l=i[1];return c?r.createElement(Kt,{ariaLive:o,close:function(){l(!1),n()}},t):null};function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n("/8Fb");var tn=document.querySelector(".message-filters"),nn=document.querySelector(".count-and-sort__filter-button");function rn(){he().then((function(e){var t,n=0;["label_id","keywords","listing_restrict","only_unreplied","show_deleted_too"].forEach((function(t){Object.entries(e).forEach((function(e){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),a=r[0],o=r[1];a===t&&""!==o&&"!keywords!"!==o&&(n+=1)}))})),n>0&&(t=n,he().then((function(e){var n=document.querySelector(".filter-buttons__filters-applied"),r=1===t?"":"s";n.classList.add("filter-buttons__filters-applied--visible"),nn.textContent="".concat(e.messaging.with," ").concat(t," ").concat(e.messaging.filter).concat(r),nn.classList.add("count-and-sort__filter-button--visible"),document.querySelector(".count-and-sort__clear-filter").classList.add("count-and-sort__clear-filter--visible"),document.querySelector(".count-and-sort__clear-filter").addEventListener("click",(function(){ct({action:"filters_reset|clear_all"})}))}))),function(e){var t=document.getElementById("label_aid"),n=document.getElementById("listing_restrict");e.label_id&&t&&(t.value=e.label_id),e.listing_restrict&&n&&(n.value=e.listing_restrict)}(e)}))}tn&&(document.getElementById("applyMessageFilters").addEventListener("click",(function(){ct({action:"filters_apply"})})),document.querySelector(".button--close").addEventListener("click",(function(){ct({action:"filters_close|x"})})));var an=(n("XOTF"),function(e){return r.createElement(r.Fragment,null,e.options.map((function(t){return r.createElement("div",{key:t.id,className:"form-group__radio"},r.createElement("input",{value:t.id,id:t.id,name:"bulk-reply",type:"radio",defaultChecked:e.selected===t.id,className:"form-group__input",onChange:function(){return e.updateReason(t.id)}}),r.createElement("label",{htmlFor:t.id,className:"form-group__label"},r.createElement("span",{className:"form-group__label-text-bold"},t.label)," –"," ",t.text))})))});an.propTypes={options:ke().arrayOf(ke().shape({id:ke().string.isRequired,label:ke().string.isRequired,text:ke().string.isRequired})).isRequired,selected:ke().string,updateReason:ke().func};var on=an,cn=function(e){var t=e.firstName,n=e.profilePhotoUrl,a=e.reason,o=e.pageTranslations;return r.createElement("div",{className:"auto-reply__preview"},r.createElement("h4",{className:"heading heading--sub auto-reply__sub-heading"},"Preview"),r.createElement("div",{className:"auto-reply__preview-response"},r.createElement("span",{className:"auto-reply__preview-text"},"unavailable-offered"===a?r.createElement(r.Fragment,null,r.createElement("p",null,o.bulk_reply.hi,","),r.createElement("p",null,o.bulk_reply.unavailable_body_offered),r.createElement("p",null,o.bulk_reply.thankyou_for_interest),r.createElement("p",null,t),r.createElement("p",null,"(",o.bulk_reply.automated_reply,")")):null,"unavailable-wanted"===a?r.createElement(r.Fragment,null,r.createElement("p",null,o.bulk_reply.hi,","),r.createElement("p",null,o.bulk_reply.unavailable_body_wanted_first," ",t," ",o.bulk_reply.unavailable_body_wanted_second),r.createElement("p",null,o.bulk_reply.thankyou_for_interest),r.createElement("p",null,t),r.createElement("p",null,"(",o.bulk_reply.automated_reply,")")):null,"unsuitable-wanted"===a||"unsuitable-offered"===a?r.createElement(r.Fragment,null,r.createElement("p",null,o.bulk_reply.thanks_for_taking_time),r.createElement("p",null,o.bulk_reply.unsuitable_body),r.createElement("p",null,o.bulk_reply.good_luck),r.createElement("p",null,t),r.createElement("p",null,"(",o.bulk_reply.automated_reply,")")):null),r.createElement("img",{src:n,alt:o.bulk_reply.your_profile_photo,className:"auto-reply__profile-photo"})))};function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var un=function(e){var t,n=e.firstName,a=e.profilePhotoUrl,o=e.subDirectory,i=e.selectedCount,c=e.messageIds,l=e.showAutomatedMessageNote,s=e.userType,u=e.myAdsCount,d=e.otherUserAdType,m=e.threadView,f=e.pageTranslations,p=e.localisations,h=ln((0,r.useState)(i),2),v=h[0],y=h[1],g=ln((0,r.useState)("lookingforashare"===s||"offered"===d?"unavailable-wanted":"unavailable-offered"),2),b=g[0],_=g[1],w=[{id:"unsuitable-offered",label:f.bulk_reply.unsuitable,text:f.bulk_reply.politely_decline}],E={id:"unavailable-wanted",label:f.bulk_reply.unavailable,text:f.bulk_reply.ive_found_somewhere},k={id:"unavailable-offered",label:f.bulk_reply.unavailable,text:f.bulk_reply.room_property_has_gone};function S(){document.getElementById("autoReplyOverlay").classList.remove("overlay-target--active"),document.getElementById("overlay-mask").classList.remove("overlay-mask--active"),document.body.classList.remove("prevent-scroll")}function T(e){return m?(t=e,n=document.querySelector(".count-and-sort__amount").innerHTML,function(e,t,n){return it({category:"messaging",action:"bulkactions_reply_send",label:"".concat(t,"|").concat(n,"|").concat(window.location.href)})}(0,t,n)):ct({action:"autoreply_send"});var t,n}return(0,r.useEffect)((function(){var e=v;document.querySelectorAll(".deleteInput").forEach((function(t){t.addEventListener("change",(function(){t.parentNode.parentNode.querySelector(".thread_item").dataset.autoDecline||(t.checked?y(e+=1):y(e-=1))}))}))}),[v]),r.createElement("div",{className:"auto-reply__content"},m&&!v?r.createElement("div",{className:"automated-reply-warning"},r.createElement("h3",{className:"automated-reply-warning__heading heading heading--sub"},f.bulk_reply.replies_can_not_be_sent,r.createElement("br",null)," ",f.bulk_reply.to_automated_messages),r.createElement("p",{className:"automated-reply-warning__text"},f.bulk_reply.closed_the_conversation),r.createElement("button",{className:"button",type:"button",onClick:function(){ct({action:"bulkactions_reply_not_sent_pop_up_close"}),S()}},f.bulk_reply.okay)):r.createElement(r.Fragment,null,r.createElement("div",{className:"auto-reply__header"},r.createElement("h3",{id:"autoReplyTitle",className:"heading heading--sub auto-reply__heading"},v?"".concat(f.bulk_reply.bulk_reply_to," ").concat(v," ").concat(1===v?f.bulk_reply.user:f.bulk_reply.users):f.bulk_reply.auto_reply_to_user),r.createElement("button",{className:"auto-reply__close button button--close","aria-label":f.bulk_reply.close_auto_reply_dialog,onClick:function(){ct(m?{action:"bulkactions_reply_close|x"}:{action:"autoreply_close|x"}),S()}},r.createElement("span",{className:"button__icon"},r.createElement("i",{className:"far fa-times","aria-hidden":!0})),r.createElement("span",{className:"button__text"},p.modal.close))),l?r.createElement("p",{className:"auto-reply__small-print"},"* ",f.bulk_reply.replies_will_not_be_sent):null,r.createElement("form",{action:"/".concat(o,"/myemailreply.pl#reply"),method:"GET",className:"form"},r.createElement("div",{className:"form-group"},r.createElement(on,{options:(t="0"===u&&m?[]:w.slice(),m||!d?("lookingforashare"!==s&&"both"!==s||t.unshift(E),"haveashare"!==s&&"both"!==s||t.unshift(k),t):("offered"===d?t.unshift(E):t.unshift(k),t)),selected:b,updateReason:function(e){_(e)}})),r.createElement(cn,{firstName:n,profilePhotoUrl:a,reason:b,pageTranslations:f}),r.createElement("div",{className:"auto-reply__buttons"},r.createElement("button",{type:"button",onClick:function(){ct(m?{action:"bulkactions_reply_close|cancel"}:{action:"autoreply_close|cancel"}),S()},className:"button button--secondary"},f.bulk_reply.cancel),r.createElement("button",{className:"button",onClick:function(){T(b)}},r.createElement("div",{className:"button__content"},r.createElement("span",{className:"button__icon"},r.createElement("i",{className:"far fa-paper-plane"})),r.createElement("span",{className:"button__text"},f.bulk_reply.send)))),r.createElement("input",{type:"hidden",name:"action",value:"bulk_reply"}),r.createElement("input",{type:"hidden",name:"etemplate",value:b}),r.createElement("input",{type:"hidden",name:"message_id",value:c}))))};function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mn(e,t,n,o){var i=document.getElementById("autoReplyOverlay"),c=i.dataset,l=c.firstName,s=c.profilePhoto,u=c.subDir,d=c.userType,m=c.myAdsCount,f=c.replyingTo;Promise.all([he(),fe("localisations")]).then((function(c){var p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c,2),h=p[0],v=p[1];a.render(r.createElement(un,{firstName:l,profilePhotoUrl:s,subDirectory:u,selectedCount:o,messageIds:t,showAutomatedMessageNote:n,userType:d.split(",").length>1?"both":d,myAdsCount:m,otherUserAdType:f,threadView:e,pageTranslations:h,localisations:v}),i)}))}document.getElementsByClassName("msg__item").length>9&&function(){var e=document.querySelector(".bulkreply-promo");if(e){e.classList.add("tip--active");var t=document.querySelector(".count-and-sort__amount").innerHTML;t&&it({category:"banners",action:"msg_inbox_bulkreply_promo_panel_show",label:"conversation_qty=".concat(t)});var n=document.querySelector(".bulkreply-promo__close");n&&n.addEventListener("click",(function(){e.classList.remove("tip--active"),it({category:"banners",action:"msg_inbox_bulkreply_promo_panel_close"})}))}}();var fn=document.querySelector(".inline-reply__send-button .button");fn&&fn.addEventListener("click",(function(e){var t=document.querySelector("#reply").value;t&&function(e){var t=(new Date).toUTCString();it({category:"messaging",action:"reply_sent",label:"ad_id=".concat(window._sr.page.listing_id,"|sender_id=").concat(window._sr.customer.id,"|recipient_id=").concat(window._sr.page.recipient_id,"|time=").concat(t,"|msg=").concat(e)})}(t)}));var pn=document.querySelector(".inline-reply__attached-labels"),hn=document.querySelector(".add-labels__wrapper");pn&&hn&&pn.addEventListener("scroll",(function(){var e=pn.scrollWidth;pn.scrollLeft+hn.scrollWidth>=e-10?pn.classList.remove("inline-reply__attached-labels--overlay"):pn.classList.add("inline-reply__attached-labels--overlay")}));var vn=document.querySelector(".inline-reply__message-box"),yn=document.querySelector(".inline-reply__send-button"),gn=document.querySelector(".inline-reply__send-button .button");if(yn&&vn){var bn="";he().then((function(e){var t;bn=null===(t=e.messaging)||void 0===t?void 0:t.sending})),yn.addEventListener("mousedown",(function(e){e.preventDefault(),""!=vn.value&&(document.querySelector(".inline-reply__form").submit(),gn.innerHTML="".concat(bn,"...")||0)}))}var _n=document.querySelector(".inline-reply__attached-files"),wn=document.getElementById("attachFilesButton"),En=document.querySelector(".inline-reply__wrapper"),kn=document.querySelector(".inline-reply__attached-files");if(wn&&_n){var Sn=0;wn.addEventListener("mousedown",(function(e){e.preventDefault(),kn&&En&&(kn.classList.add("inline-reply__attached-files--overlay"),0==Sn&&kn.addEventListener("scroll",(function(){var e=kn.scrollWidth;kn.scrollLeft+En.scrollWidth>=e-10?kn.classList.remove("inline-reply__attached-files--overlay"):kn.classList.add("inline-reply__attached-files--overlay")})));var t=document.createElement("div"),n=document.createElement("span");n.innerHTML='<i class="far fa-paperclip"></i>',n.classList.add("inline-reply__attached-file-paperclip"),t.classList.add("inline-reply__attached-file");var r=document.createElement("button");r.innerHTML='<i class="fas fa-times"></i>',r.ariaLabel="Remove attached file",r.classList.add("inline-reply__attached-file-remove");var a=document.createElement("input");a.type="file",a.name="attachment".concat(Sn),a.classList.add("inline-reply__file-upload-input"),t.appendChild(n),t.appendChild(a),t.appendChild(r),_n.appendChild(t),r.addEventListener("click",(function(){var e=r.parentNode;e.parentNode.removeChild(e),0==(Sn-=1)&&kn.classList.remove("inline-reply__attached-files--overlay")})),a.click(),Sn+=1}))}var Tn=document.querySelector(".inline-reply__message-box"),Nn=document.querySelector(".inline-reply__convo-header-inner");Tn&&Nn&&(Tn.addEventListener("focus",(function(){Tn.rows=3,Nn.classList.add("inline-reply__convo-header-inner--collapsed")})),Tn.addEventListener("focusout",(function(){Tn.rows=1,Nn.classList.remove("inline-reply__convo-header-inner--collapsed")})));var Cn=document.createElement("div");Cn.classList.add("myObserver");var On=document.querySelector(".inline-reply__convo-header");On&&(On.parentNode.insertBefore(Cn,On),new IntersectionObserver((function(e){0===e[0].intersectionRatio?document.querySelector(".inline-reply__convo-header").classList.add("inline-reply__convo-header--stuck"):1===e[0].intersectionRatio&&document.querySelector(".inline-reply__convo-header").classList.remove("inline-reply__convo-header--stuck")}),{threshold:[0,1]}).observe(document.querySelector(".myObserver"))),document.querySelectorAll(".thread_item").forEach((function(e){e.addEventListener("click",(function(){return e.classList.contains("thread_unread")?localStorage.setItem("read","new_read"):localStorage.setItem("read","read")}))}));var xn=localStorage.getItem("read"),Ln={};"read"==xn?(Ln={read:1},_sr.action.message=Ln):"new_read"==xn&&(Ln={new_read:1},_sr.action.message=Ln),localStorage.removeItem("read");var In=document.getElementById("delete_selected"),Mn=document.getElementById("bulkReplyButton"),An=document.getElementById("autoReplyButton"),Dn=document.getElementById("manageThreadsForm"),Pn=document.getElementById("messageFilterButton"),jn=document.getElementById("select_all");function Fn(){var e=[In,document.getElementById("undelete_selected"),Mn,document.getElementById("threadAdLabelButton")],t=document.querySelectorAll(".deleteInput:checked").length,n=document.querySelector(".threads_manage");!function(e,t){e.forEach((function(e){return!!e&&(0===t?e.setAttribute("disabled",!0):e.removeAttribute("disabled"))}))}(e,t),function(e,t){if(0===t)return e.classList.remove("threads_manage--active");e.classList.add("threads_manage--active")}(n,t)}Mn&&In&&(It.addEventListener("click",(function(e){e.stopPropagation(),document.querySelectorAll(".deleteInput:checked").forEach((function(t){t.parentNode.parentNode.querySelector(".thread_unread")&&(e.preventDefault(),document.getElementById("overlay-mask").classList.add("overlay-mask--active"),document.querySelector(".delete-unread-warning").classList.add("overlay-target--active"),document.querySelector(".delete-unread-warning__content").focus())}))})),document.querySelector(".delete-unread-warning__button").addEventListener("click",Mt),document.querySelector(".delete-unread-warning__message .button").addEventListener("click",(function(e){e.stopPropagation(),Mt(),Lt.click()}))),Pn&&function(){var e=document.getElementById("messageFilterButton"),t=document.getElementById("resetMessageFilters"),n=document.getElementById("resetMessageFiltersMobile");if(tn){var r=document.getElementById("folder");r&&(r.value=tn.dataset.folder)}e&&(rn(),e.addEventListener("click",(function(){ct({action:"filters_open"})}))),t&&t.addEventListener("click",(function(){var e,t,n,r;e=document.getElementById("label_aid"),t=document.getElementById("listing_restrict"),n=document.getElementById("only_unreplied"),r=document.getElementById("show_deleted_too"),document.getElementById("keywordFilter").value="",e&&(e.value=""),t&&(t.value=""),n&&(n.checked=!1),r&&(r.checked=!1),dt()})),n&&n.addEventListener("click",(function(){!function(){var e=document.getElementById("label_aid"),t=document.getElementById("listing_restrict"),n=document.getElementById("folder");document.getElementById("keywordFilter").value="",e&&(e.value=""),t&&(t.value=""),n&&(n.value="")}(),dt()})),nn&&nn.addEventListener("click",(function(e){ct({action:"filters_open|count_link"}),function(e){e.stopPropagation(),document.getElementById("overlay-mask").classList.add("overlay-mask--active"),tn.classList.add("overlay-target--active"),tn.focus()}(e)}))}(),(Mn||An)&&function(){var e=document.getElementById("bulkReplyButton"),t=document.getElementById("autoReplyButton");e&&e.addEventListener("click",(function(){var e,t,n,r;t=document.querySelectorAll(".deleteInput:checked"),n=!1,r=0,t.forEach((function(t){var a=t.parentNode.parentNode.querySelector(".thread_item");if(!a.dataset.autoDecline){var o=a.dataset.messageId;e=e?"".concat(e,",").concat(o):"".concat(o),r+=1}a.dataset.autoDecline&&(n=!0)})),mn(!0,e,n,r),ct({action:"bulkactions_reply_open"})})),t&&(mn(!1,document.querySelectorAll(".conversation .message:last-child")[0].getAttribute("id").split("_")[1]),t.addEventListener("click",(function(){ct({action:"autoreply_open"})})))}(),Dn&&(Fn(),document.querySelectorAll(".deleteInput").forEach((function(e){var t=e.parentNode.parentNode.querySelector(".thread_item");e.addEventListener("change",(function(){var n,r;return n=document.querySelectorAll(".deleteInput:checked").length,r=document.querySelectorAll(".deleteInput").length,jn.checked=n==r,e.checked?(t.classList.add("selected"),Fn()):(t.classList.remove("selected"),Fn())}))}))),jn&&jn.addEventListener("click",(function(){document.querySelectorAll(".deleteInput").forEach((function(e){e.checked=1==jn.checked;var t=e.parentNode.parentNode.querySelector(".thread_item");e.checked?t.classList.add("selected"):t.classList.remove("selected")})),Fn()}));var qn=document.getElementById("sortMessages");if(qn){qn.addEventListener("click",(function(){return ct({action:"sort_open"})}));var Bn=new URLSearchParams(window.location.search);qn.value=Bn.get("sort"),qn.addEventListener("change",(function(e){var t=e.target.value;Bn.set("sort",t),"full_name_asc"==t?ut():"default_asc"==t?st():lt(),window.location.search=Bn}))}var Un=document.getElementById("sortNewest");Un&&Un.addEventListener("click",lt);var Rn=document.getElementById("sortOldest");Rn&&Rn.addEventListener("click",st);var Wn=document.getElementById("sortByName");Wn&&Wn.addEventListener("click",ut);var Yn=document.getElementById("arrangeViewing"),Hn=document.querySelector(".conversation-note"),zn=document.getElementById("labelFilterCreateLabelComponent");document.querySelectorAll(".label-filter__count-number").forEach((function(e){0!=e.textContent&&e.classList.add("label-filter__count-number--bold")}));var Gn=document.querySelector("#viewings-message"),Vn=window.location.search,Xn=new URLSearchParams(Vn).get("msg");if(Xn){Gn||((Gn=document.createElement("div")).id="viewings-message",document.body.appendChild(Gn));var Qn="";switch(Xn){case"viewing-created":Qn="Your viewing has been created. A message has been sent for confirmation.";break;case"viewing-edited":Qn="Your viewing has been updated";break;case"viewing-cancelled":Qn="This viewing has been cancelled"}a.render(r.createElement(Zt,{ariaLive:"assertive",onClose:function(){a.unmountComponentAtNode(Gn)}},Qn),Gn)}pe().then((function(e){if(e.session.loggedin){if(Yn){var t=Yn.dataset,n=t.advertId,o=t.seekerId,i=t.adCount,c=(new Date).toISOString();ce().get("/api/1.0/viewings?end_time[gte]=".concat(c)).then((function(t){var c=function(e,t,n){if(!e.length)return!1;var r=e.filter((function(e){return e.seeker.user.id===n&&e.message_thread.advert.id===t})).filter((function(e){return"cancelled"!==e.seeker.status&&"cancelled"!==e.offerer.status}));return!!r.length&&r[0]}(t.data.data,n,o);c&&(c.start_time=re(Date.parse(c.start_time),"yyyy-MM-dd'T'HH:mm:ss"),c.end_time=re(Date.parse(c.end_time),"yyyy-MM-dd'T'HH:mm:ss")),a.render(r.createElement(at,{viewing:c,advertId:n,userId:e.customer.id,seekerId:o,userName:"".concat(e.customer.first_name," ").concat(e.customer.last_name),offererAdCount:i}),Yn)})).catch((function(e){return console.log(e)}))}if(Hn){var l=document.getElementById("spareroom");document.querySelector("body").insertBefore(Hn,l)}zn&&a.render(r.createElement(qt,{uuid:e.customer.uuid,localisations:e.page}),zn)}}));var $n=document.querySelector(".mobile .messaging-header__advert-title");$n&&new se($n,{height:52,keep:".messaging-header__title-link",truncate:"letter",watch:"window"}),document.querySelector("#edit-thread-note")&&function(){xt.apply(this,arguments)}();var Kn=document.getElementById("undelete_selected");Kn&&Kn.addEventListener("click",(function(){return ct({action:"bulkactions_messages_undelete"})})),In&&In.addEventListener("click",(function(){return ct({action:"bulkactions_messages_delete"})}));var Jn=document.querySelector(".messaging-header__title-link");Jn&&Jn.addEventListener("click",(function(){return ct({action:"conversation_view_view_ad|responder"})}));var Zn=document.querySelector(".messaging-header__message-thread-link");Zn&&Zn.addEventListener("click",(function(){return ct({action:"conversation_view_view_ad|recipient"})})),document.getElementById("labelFilterMobile")&&document.getElementById("labelFilterMobile").addEventListener("click",(function(){return ct({action:"labels_filter_open"})}));var er=document.getElementById("labelFilter");if(er&&er.querySelector(".button--close").addEventListener("click",(function(){ct({action:"labels_filter_close|x"})})),document.getElementById("threadAdLabelButton")&&document.getElementById("threadAdLabelButton").addEventListener("click",(function(){ct({action:"bulkactions_labels_open"})})),document.querySelector("#bulkAddLabel")){document.querySelector(".bulk-add-label__close").addEventListener("click",(function(){ct({action:"bulkactions_labels_close|x"})}));for(var tr=document.getElementsByClassName("bulk-add-label__add-label"),nr=0;nr<tr.length;nr+=1)tr[nr].addEventListener("click",(function(){ct({action:"bulkactions_labels_label-add"})}));document.querySelector(".bulk-add-label__button").addEventListener("click",(function(){ct({action:"bulkactions_labels_create_attach"})})),document.addEventListener("keydown",(function(e){27===e.keyCode&&ct({action:"bulkactions_labels_close|escape"})}))}for(var rr=document.getElementsByClassName("add-label__label-icon-wrapper"),ar=0;ar<rr.length;ar+=1)rr[ar].addEventListener("click",mt);for(var or=document.getElementsByClassName("thread-item__label-icon-wrapper"),ir=0;ir<or.length;ir+=1)or[ir].addEventListener("click",mt);var cr=document.getElementById("labels");document.getElementById("overlay-mask").addEventListener("click",(function(){!function(){if(document.getElementById("manageLabelsPopup").classList.contains("manage-labels__wrapper--active")&&ct({action:"labels_manage_close|overlay"}),cr){var e=document.getElementById("movedElement");e&&e.classList.contains("dropdown--visible")&&ct({action:"labels_add_close|overlay"})}else{var t=document.getElementById("bulkAddLabel");t&&t.classList.contains("dropdown--visible")&&ct({action:"bulkactions_labels_close|overlay"})}}()}));var lr=document.querySelector("#messageThreadFilters"),sr=document.querySelector(".message_filter"),ur=document.querySelector("#messageThreadFilters span");function dr(){var e=document.getElementById("manageLabelsPopup"),t=document.getElementById("manageLabelsComponent"),n=document.getElementById("overlay-mask");e&&t&&pe().then((function(o){a.render(r.createElement(Ht,{uuid:o.customer.uuid,localisations:o.page}),t),e.classList.add("manage-labels__wrapper--active"),n.classList.add("overlay-mask--active")}))}function mr(){var e=document.getElementById("manageLabelsPopup"),t=document.getElementById("overlay-mask");e&&(e.classList.remove("manage-labels__wrapper--active"),t.classList.remove("overlay-mask--active"))}lr&&(function(){var e=new URLSearchParams(window.location.search);(e.get("only_unreplied")||e.get("listing_restrict")||e.get("show_deleted_too"))&&(ur.innerText="Hide filter",sr.classList.add("message_filter--expanded"))}(),lr.addEventListener("click",(function(){return sr.classList.contains("message_filter--expanded")?(ur.innerText="Show filter",sr.classList.remove("message_filter--expanded")):(ur.innerText="Hide filter",sr.classList.add("message_filter--expanded"))}))),document.querySelectorAll("[data-open-manage-labels]").forEach((function(e){e.addEventListener("click",(function(){dr(),ct({action:"labels_manage_open"})}))}));var fr=document.getElementById("manageLabelsCloseButton");fr&&fr.addEventListener("click",(function(){mr()}));var pr=document.querySelector(".count-and-sort__clear-filter--visible");pr&&pr.addEventListener("click",(function(){ct({action:"filters_reset|clear_filters"})})),window.openManageLabels=function(){return dr()},window.closeManageLabels=function(){return mr()}},"/kEZ":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n("q1tI"),s=n("i8i4"),u=n("17x9"),d=n("gKLF").createFocusTrap,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(m,e);var t,n,r,u,d=(r=m,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(r);if(u){var n=c(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return i(this,e)});function m(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=d.call(this,e)).tailoredFocusTrapOptions={returnFocusOnDeactivate:!1},t.returnFocusOnDeactivate=!0;var n=e.focusTrapOptions;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&("returnFocusOnDeactivate"!==r?t.tailoredFocusTrapOptions[r]=n[r]:t.returnFocusOnDeactivate=!!n[r]);return t.focusTrapElements=e.containerElements||[],t.updatePreviousElement(),t}return t=m,(n=[{key:"updatePreviousElement",value:function(){"undefined"!=typeof document&&(this.previouslyFocusedElement=document.activeElement)}},{key:"returnFocus",value:function(){this.previouslyFocusedElement&&this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus()}},{key:"setupFocusTrap",value:function(){if(!this.focusTrap){var e=this.focusTrapElements.map(s.findDOMNode);e.some(Boolean)&&(this.focusTrap=this.props._createFocusTrap(e,this.tailoredFocusTrapOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(e){if(this.focusTrap){if(e.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements),e.active&&!this.props.active)return this.focusTrap.deactivate({returnFocus:!1}),void(this.returnFocusOnDeactivate&&this.returnFocus());!e.active&&this.props.active&&(this.updatePreviousElement(),this.focusTrap.activate()),e.paused&&!this.props.paused?this.focusTrap.unpause():!e.paused&&this.props.paused&&this.focusTrap.pause()}else e.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements,this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.focusTrap&&this.focusTrap.deactivate({returnFocus:!1}),this.returnFocusOnDeactivate&&this.returnFocus()}},{key:"render",value:function(){var e=this,t=this.props.children?l.Children.only(this.props.children):void 0;if(t){if(t.type&&t.type===l.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");return l.cloneElement(t,{ref:function(n){var r=e.props.containerElements;t&&("function"==typeof t.ref?t.ref(n):t.ref&&(t.ref.current=n)),e.focusTrapElements=r||[n]}})}return null}}])&&a(t.prototype,n),m}(l.Component),f="undefined"==typeof Element?Function:Element;m.propTypes={active:u.bool,paused:u.bool,focusTrapOptions:u.shape({onActivate:u.func,onDeactivate:u.func,initialFocus:u.oneOfType([u.instanceOf(f),u.string,u.func]),fallbackFocus:u.oneOfType([u.instanceOf(f),u.string,u.func]),escapeDeactivates:u.bool,clickOutsideDeactivates:u.oneOfType([u.bool,u.func]),returnFocusOnDeactivate:u.bool,setReturnFocus:u.oneOfType([u.instanceOf(f),u.string,u.func]),allowOutsideClick:u.oneOfType([u.bool,u.func]),preventScroll:u.bool}),containerElements:u.arrayOf(u.instanceOf(f)),children:u.oneOfType([u.element,u.instanceOf(f)])},m.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:d},e.exports=m},gKLF:function(e,t,n){"use strict";n.r(t),n.d(t,{createFocusTrap:function(){return w}});var r,a=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],o=a.join(","),i="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,c=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName&&"DETAILS"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t},l=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},s=function(e){return"INPUT"===e.tagName},u=function(e){return!(e.disabled||function(e){return s(e)&&"hidden"===e.type}(e)||function(e){if("hidden"===getComputedStyle(e).visibility)return!0;var t=i.call(e,"details>summary:first-of-type")?e.parentElement:e;if(i.call(t,"details:not([open]) *"))return!0;for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(e))},d=function(e){return!(!u(e)||function(e){return function(e){return s(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||e.ownerDocument,r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var a=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!a||a===e}(e)}(e)||c(e)<0)},m=a.concat("iframe").join(","),f=function(e){if(!e)throw new Error("No node provided");return!1!==i.call(e,m)&&u(e)};function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v,y=(v=[],{activateTrap:function(e){if(v.length>0){var t=v[v.length-1];t!==e&&t.pause()}var n=v.indexOf(e);-1===n||v.splice(n,1),v.push(e)},deactivateTrap:function(e){var t=v.indexOf(e);-1!==t&&v.splice(t,1),v.length>0&&v[v.length-1].unpause()}}),g=function(e){return setTimeout(e,0)},b=function(e,t){var n=-1;return e.every((function(e,r){return!t(e)||(n=r,!1)})),n},_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?e.apply(void 0,n):e},w=function(e,t){var n,a=document,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},t),u={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},m=function(e){return u.containers.some((function(t){return t.contains(e)}))},v=function(e){var t=s[e];if(!t)return null;var n=t;if("string"==typeof t&&!(n=a.querySelector(t)))throw new Error("`".concat(e,"` refers to no known node"));if("function"==typeof t&&!(n=t()))throw new Error("`".concat(e,"` did not return a node"));return n},w=function(){var e;if(null!==v("initialFocus"))e=v("initialFocus");else if(m(a.activeElement))e=a.activeElement;else{var t=u.tabbableGroups[0];e=t&&t.firstTabbableNode||v("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},E=function(){if(u.tabbableGroups=u.containers.map((function(e){var t,n,r,a,s,u,m,f=(n=[],r=[],(a=e,s=(t=t||{}).includeContainer,u=d,m=Array.prototype.slice.apply(a.querySelectorAll(o)),s&&i.call(a,o)&&m.unshift(a),m.filter(u)).forEach((function(e,t){var a=c(e);0===a?n.push(e):r.push({documentOrder:t,tabIndex:a,node:e})})),r.sort(l).map((function(e){return e.node})).concat(n));if(f.length>0)return{container:e,firstTabbableNode:f[0],lastTabbableNode:f[f.length-1]}})).filter((function(e){return!!e})),u.tabbableGroups.length<=0&&!v("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},k=function e(t){t!==a.activeElement&&(t&&t.focus?(t.focus({preventScroll:!!s.preventScroll}),u.mostRecentlyFocusedNode=t,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(t)&&t.select()):e(w()))},S=function(e){m(e.target)||(_(s.clickOutsideDeactivates,e)?n.deactivate({returnFocus:s.returnFocusOnDeactivate&&!f(e.target)}):_(s.allowOutsideClick,e)||e.preventDefault())},T=function(e){var t=m(e.target);t||e.target instanceof Document?t&&(u.mostRecentlyFocusedNode=e.target):(e.stopImmediatePropagation(),k(u.mostRecentlyFocusedNode||w()))},N=function(e){if(!1!==s.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void n.deactivate();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){E();var t=null;if(u.tabbableGroups.length>0)if(b(u.tabbableGroups,(function(t){return t.container.contains(e.target)}))<0)t=e.shiftKey?u.tabbableGroups[u.tabbableGroups.length-1].lastTabbableNode:u.tabbableGroups[0].firstTabbableNode;else if(e.shiftKey){var n=b(u.tabbableGroups,(function(t){var n=t.firstTabbableNode;return e.target===n}));if(n>=0){var r=0===n?u.tabbableGroups.length-1:n-1;t=u.tabbableGroups[r].lastTabbableNode}}else{var a=b(u.tabbableGroups,(function(t){var n=t.lastTabbableNode;return e.target===n}));if(a>=0){var o=a===u.tabbableGroups.length-1?0:a+1;t=u.tabbableGroups[o].firstTabbableNode}}else t=v("fallbackFocus");t&&(e.preventDefault(),k(t))}(e)},C=function(e){_(s.clickOutsideDeactivates,e)||m(e.target)||_(s.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},O=function(){if(u.active)return y.activateTrap(n),r=s.delayInitialFocus?g((function(){k(w())})):k(w()),a.addEventListener("focusin",T,!0),a.addEventListener("mousedown",S,{capture:!0,passive:!1}),a.addEventListener("touchstart",S,{capture:!0,passive:!1}),a.addEventListener("click",C,{capture:!0,passive:!1}),a.addEventListener("keydown",N,{capture:!0,passive:!1}),n},x=function(){if(u.active)return a.removeEventListener("focusin",T,!0),a.removeEventListener("mousedown",S,!0),a.removeEventListener("touchstart",S,!0),a.removeEventListener("click",C,!0),a.removeEventListener("keydown",N,!0),n};return(n={activate:function(e){if(u.active)return this;E(),u.active=!0,u.paused=!1,u.nodeFocusedBeforeActivation=a.activeElement;var t=e&&e.onActivate?e.onActivate:s.onActivate;return t&&t(),O(),this},deactivate:function(e){if(!u.active)return this;clearTimeout(r),x(),u.active=!1,u.paused=!1,y.deactivateTrap(n);var t=e&&void 0!==e.onDeactivate?e.onDeactivate:s.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:s.returnFocusOnDeactivate)&&g((function(){var e;k((e=u.nodeFocusedBeforeActivation,v("setReturnFocus")||e))})),this},pause:function(){return u.paused||!u.active||(u.paused=!0,x()),this},unpause:function(){return u.paused&&u.active?(u.paused=!1,E(),O(),this):this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return u.containers=t.map((function(e){return"string"==typeof e?a.querySelector(e):e})),u.active&&E(),this}}).updateContainerElements(e),n}},XOTF:function(){},"l4R/":function(){},LPdc:function(){},"/YH0":function(){},afw4:function(){},cDjE:function(){},IoHR:function(){},KoUA:function(){},Avyg:function(){},"q+cD":function(){},FYjs:function(){},a96D:function(){},rtAd:function(){},MgzW:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,c,l=a(e),s=1;s<arguments.length;s++){for(var u in i=Object(arguments[s]))n.call(i,u)&&(l[u]=i[u]);if(t){c=t(i);for(var d=0;d<c.length;d++)r.call(i,c[d])&&(l[c[d]]=i[c[d]])}}return l}},"16Al":function(e,t,n){"use strict";var r=n("WbBG");function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},WbBG:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"+wdc":function(e,t){"use strict";var n,r,a,o,i;if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,l=null,s=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(s,0),e}},u=Date.now();t.unstable_now=function(){return Date.now()-u},n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(s,0))},r=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},o=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,m=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var h=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var v=m.now();t.unstable_now=function(){return m.now()-v}}var y=!1,g=null,b=-1,_=5,w=0;o=function(){return t.unstable_now()>=w},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,k=E.port2;E.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+_;try{g(!0,e)?k.postMessage(null):(y=!1,g=null)}catch(e){throw k.postMessage(null),e}}else y=!1},n=function(e){g=e,y||(y=!0,k.postMessage(null))},r=function(e,n){b=f((function(){e(t.unstable_now())}),n)},a=function(){p(b),b=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<C(a,t)))break e;e[r]=t,e[n]=a,n=r}}function T(e){return void 0===(e=e[0])?null:e}function N(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],c=o+1,l=e[c];if(void 0!==i&&0>C(i,n))void 0!==l&&0>C(l,i)?(e[r]=l,e[c]=n,r=c):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==l&&0>C(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var O=[],x=[],L=1,I=null,M=3,A=!1,D=!1,P=!1;function j(e){for(var t=T(x);null!==t;){if(null===t.callback)N(x);else{if(!(t.startTime<=e))break;N(x),t.sortIndex=t.expirationTime,S(O,t)}t=T(x)}}function F(e){if(P=!1,j(e),!D)if(null!==T(O))D=!0,n(q);else{var t=T(x);null!==t&&r(F,t.startTime-e)}}function q(e,n){D=!1,P&&(P=!1,a()),A=!0;var i=M;try{for(j(n),I=T(O);null!==I&&(!(I.expirationTime>n)||e&&!o());){var c=I.callback;if(null!==c){I.callback=null,M=I.priorityLevel;var l=c(I.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?I.callback=l:I===T(O)&&N(O),j(n)}else N(O);I=T(O)}if(null!==I)var s=!0;else{var u=T(x);null!==u&&r(F,u.startTime-n),s=!1}return s}finally{I=null,M=i,A=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||A||(D=!0,n(q))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return T(O)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,o,i){var c=t.unstable_now();if("object"==typeof i&&null!==i){var l=i.delay;l="number"==typeof l&&0<l?c+l:c,i="number"==typeof i.timeout?i.timeout:B(e)}else i=B(e),l=c;return e={id:L++,callback:o,priorityLevel:e,startTime:l,expirationTime:i=l+i,sortIndex:-1},l>c?(e.sortIndex=l,S(x,e),null===T(O)&&e===T(x)&&(P?a():P=!0,r(F,l-c))):(e.sortIndex=i,S(O,e),D||A||(D=!0,n(q))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();j(e);var n=T(O);return n!==I&&null!==I&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<I.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},QCnb:function(e,t,n){"use strict";e.exports=n("+wdc")}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.x=function(){},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={6489:0},t=[["/rw+",4736]],r=function(){},a=function(a,o){for(var i,c,l=o[0],s=o[1],u=o[2],d=o[3],m=0,f=[];m<l.length;m++)c=l[m],n.o(e,c)&&e[c]&&f.push(e[c][0]),e[c]=0;for(i in s)n.o(s,i)&&(n.m[i]=s[i]);for(u&&u(n),a&&a(o);f.length;)f.shift()();return d&&t.push.apply(t,d),r()},o=self.webpackChunkspareroom3=self.webpackChunkspareroom3||[];function i(){for(var r,a=0;a<t.length;a++){for(var o=t[a],i=!0,c=1;c<o.length;c++){var l=o[c];0!==e[l]&&(i=!1)}i&&(t.splice(a--,1),r=n(n.s=o[0]))}return 0===t.length&&(n.x(),n.x=function(){}),r}o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o));var c=n.x;n.x=function(){return n.x=c||function(){},(r=i)()}}(),n.x()}();
//# sourceMappingURL=my_threads.f3ef1f368a0f3e9aa255.js.map